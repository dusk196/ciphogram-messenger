<header>
  <section class="hero is-primary is-halfheight">
    <div class="hero-body">
      <div>
        <h1 class="title is-size-2 is-size-3-mobile">
          MAZE - be amazed!
        </h1>
        <h2 class="subtitle is-size-4 is-size-5-mobile">
          Over <strong> {{counter}} </strong> secure messages are exchanged & still counting... ‚ù§Ô∏è
        </h2>
      </div>
    </div>
    <div class="hero-foot">
      <nav class="tabs is-boxed is-fullwidth">
        <div class="container">
          <ul>
            <li [ngClass]="{'is-active': createRoom}" (click)="createRoom=true;">
              <a>Create room</a>
            </li>
            <li [ngClass]="{'is-active': !createRoom}" (click)="createRoom=false;">
              <a>Join Room</a>
            </li>
          </ul>
        </div>
      </nav>
    </div>
  </section>
</header>
<main class="main">
  <section class="section">
    <p *ngIf="createRoom" class="field">
      Getting started with this messenger is really easy. Just create a room and share either the secret Room ID or the
      <strong> Quick Join </strong> link (easiest way) with whomever you like.
    </p>
    <p *ngIf="!createRoom" class="field">
      Don't have the <strong> Quick Join </strong> link? You can ask the sender for it ot provide the Room ID below to
      join a room.
    </p>
    <div *ngIf="createRoom" class="columns is-variable is-8">
      <div class="column is-6">
        <div class="field is-horizontal">
          <div class="field-label is-normal">
            <label class="label"> Alias: </label>
          </div>
          <div class="field-body">
            <div class="field">
              <div class="control">
                <input class="field input is-primary" type="text" placeholder="Your Alias (required)"
                  [(ngModel)]="userDetails.name" maxlength=30 [disabled]="(isLoading || isChecking)" />
              </div>
            </div>
          </div>
        </div>
        <div class="field is-horizontal">
          <div class="field-label is-normal"> </div>
          <div class="field-body">
            <div class="field">
              <div class="control">
                <label class="checkbox" for="Demo" (click)="onModeChange()">
                  <input (change)="onModeChange()" [checked]="isProdMode" type="checkbox" name="Demo" title="Demo" />
                  Production mode (recommended)
                </label>
              </div>
            </div>
          </div>
        </div>
        <div class="field is-horizontal">
          <div class="field-label is-normal"> </div>
          <div class="field-body">
            <div class="field">
              <div class="control">
                <div class="buttons">
                  <button type="button" class="button is-primary" (click)="generateAlias()"
                    [disabled]="(isLoading || isChecking)">
                    Random Alias
                  </button>
                  <button type="button" class="button is-primary" (click)="generateAlias()" (click)="jumpToRoom()"
                    [disabled]="userDetails.name.length === 0 || isChecking" [ngClass]="{'is-loading': isLoading}">
                    Get Started
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="column is-6">
        <div class="field is-horizontal">
          <div class="field-label is-normal">
            <label class="label"> Room ID: </label>
          </div>
          <div class="field-body">
            <div class="field">
              <div class="control">
                <input class="input is-primary" title="Room ID" type="text" readonly
                  [value]="userDetails.associatedRoomId" />
              </div>
            </div>
          </div>
        </div>
        <div class="field is-horizontal">
          <div class="field-label is-normal">
            <label class="label"> Quick Join Link: </label>
          </div>
          <div class="field-body">
            <div class="field">
              <div class="control">
                <input class="input is-primary" title="Quick Join Link" type="text" readonly [value]="quickJoin" />
              </div>
            </div>
          </div>
        </div>
        <div class="field is-horizontal">
          <div class="field-label is-normal"> </div>
          <div class="field-body">
            <div class="field">
              <div class="control">
                <div class="buttons">
                  <button type="button" class="button is-primary" (click)="refreshId()"
                    [disabled]="(isLoading || isChecking)">
                    Refresh ID
                  </button>
                  <button type="button" class="button is-primary" (click)="onCopy()">
                    {{copyText}}
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <article class="message is-info">
      <div class="message-body">
        <strong class="is-underlined">Pro Tips:</strong>
        <p *ngIf="createRoom">
          üî• You can also use the <strong> Quick Start </strong> link:
          <strong>
            <a href="abc.com/xyz" target="_blank"> abc.com/xyz </a>
          </strong>
          to create a random room with a random alias and start chatting in no time!
        </p>
        <p *ngIf="!createRoom">
          üî• You can ask for the <strong> Quick Join </strong> link to the sender instead of Room ID which will directly
          redirect you to a room with a random alias.
        </p>
        <p> üòé Aliases can be changed later. </p>
      </div>
    </article>
  </section>
  <section class="hero is-medium is-info">
    <div class="hero-body">
      <h3 class="subtitle is-size-5">
        The safe & secure, 100% anonymous, untrackable yet quite fast messenger made for privacy enthusiasts...
        <a class="is-underlined has-text-light" href="javascript:void(0)" (click)="showHow()"> How? </a>
      </h3>
      <p>
        Have you ever felt not safe using big corporates messaging platform? Have you ever felt the need of safe &
        secure, 100% anonymous, untrackable & yet fast messenger with is truly end-to-end encrypted? I sure did!
        Personally, I take privacy very seriously. I don't even support using WhatsApp or even Google services; only
        because of my privacy concerns. Hence, the MAZE Messenger!
      </p>
    </div>
  </section>
</main>
<footer class="footer">
  <p class="has-text-centered">
    Made with ‚ù§Ô∏è by Sayantan Roy.
  </p>
  <p class="has-text-centered">
    Source code:
    <a class="is-underlined" rel="noopener" href="https://github.com/dusk196/maze-messenger" target="_blank">GitHub</a>
  </p>
</footer>
<div class="home full-viewport flex-center">
  <header class="flex-center">
    <h1>MAZE - be amazed!</h1>
    <h2>Safe & Secure, Anonymous, Untrackable and Fast</h2>
    <h2 class="sublink" (click)="showHow()">Here's how...</h2>
  </header>
  <main>
    <div class="container">
      <div class="alias-container">
        <input class="alias" type="text" placeholder="Your Alias (required)" [(ngModel)]="userDetails.name" maxlength=30
          [disabled]="(isLoading || isChecking)" />
        <button type="button" class="action-btns" (click)="generateAlias()"
          [disabled]="(isLoading || isChecking)">Random</button>
      </div>
      <div class="prod-mode">
        <input (change)="onModeChange()" [checked]="isProdMode" type="checkbox" name="Demo" title="Demo" />
        <label for="Demo" (click)="onModeChange()" [innerText]="'Production mode'"></label>
      </div>
      <div class="inner-container">
        <div class="left-container">
          <div class="new-room">
            <span>New Room ID:</span>
            <div class="new-room-input">
              <button type="button" class="refresh-id tooltip" (click)="refreshId()"
                [disabled]="(isLoading || isChecking)">
                <span class="d-none">generate new Room ID</span>
                <span class="tooltip-text">Get a new one</span>
              </button>
              <input title="Room ID" type="text" readonly [value]="userDetails.associatedRoomId"
                [disabled]="(isLoading || isChecking)" />
              <button type="button" class="copy tooltip" (click)="onCopy()">
                <span class="d-none">copy new room id</span>
                <span class="tooltip-text" [innerText]="copyText"></span>
              </button>
            </div>
          </div>
          <button class="action-btns" type="button" [ngClass]="{'d-none': isLoading}"
            [disabled]="userDetails.name.length === 0 || isChecking" (click)="jumpToRoom()">
            Get Started
          </button>
          <span *ngIf="isLoading">Connecting...</span>
        </div>
        <div class=" seperator">
        </div>
        <div class="right-container">
          <span>Already have a Room ID? Join now:</span>
          <input type="text" maxlength=36 placeholder="Paste a valid Room ID" [(ngModel)]="userRoomId"
            (ngModelChange)="checkRoomId()" [disabled]="(isLoading || isChecking)" />
          <button class="action-btns" type="button" (click)="jumpToRoomId()" [ngClass]="{'d-none': isChecking}"
            [disabled]="userDetails.name.length === 0 || !isValidUserRoomId || isChecking || (userRoomId === userDetails.associatedRoomId)">
            Join
          </button>
          <span *ngIf="isChecking">Getting Details...</span>
        </div>
      </div>
    </div>
  </main>
  <footer>
    <div>
      <p>
        Made with ‚ù§Ô∏è by Sayantan Roy. Source code:
        <a rel="noopener" href="https://github.com/dusk196/maze-messenger" target="_blank">GitHub</a>
      </p>
    </div>
    <p>Total messages exchanged: {{counter}}</p>
  </footer>
</div>
<app-modal [modalDetails]="modalDetails" (closeModalEvent)="closeModal()"></app-modal>
